<ui:composition template="/WEB-INF/templates/masterTemplate.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
	
	
	<ui:define name="title">
		<h:outputText value="#{msg.pageTitleGuest}" rendered="#{login.user.privilege gt 3}" />
		<h:outputText value="#{msg.pageTitleUser}" rendered="#{login.user.privilege eq 3}" />
		<h:outputText value="#{msg.pageTitleSuperuser}" rendered="#{login.user.privilege eq 2}" />
		<h:outputText value="#{msg.pageTitleAdmin}" rendered="#{login.user.privilege eq 1}" />
	</ui:define>
	
	
	
	<ui:define name="content">
		<h:outputText  value="#{msg.welcome}"></h:outputText>
		#{login.user.username}
		<h:form>
			<h:outputLabel for="searchMovie">Search:</h:outputLabel>
			<h:inputText id="searchMovie" value="#{login.movie.keyWord}"></h:inputText>
			<h:commandButton value="Search" action="#{login.movie.search}" ></h:commandButton>
			
			<h:dataTable border="1" var="m" value="#{login.movie.foundMoviesList}">
				<h:column>
					<f:facet name="header">
						Naziv
					</f:facet>
					#{m.title}
				</h:column>
				<h:column>
					<f:facet name="header">
						Datum objavljivanja
					</f:facet>
					<h:outputText value="#{m.releaseDate.time}">
						<f:convertDateTime type="date" dateStyle="long" />
					</h:outputText>					
				</h:column>
				<h:column rendered="#{login.user.privilege lt 4}">
					<h:commandLink value="#{msg.details}" action="#{login.movie.details2(m)}">
					</h:commandLink>
				</h:column>
			
			</h:dataTable>
		</h:form>
		<h:form>
			<h:panelGrid columns="3" rendered="#{!login.loggedIn}">
		        <h:outputLabel for="username">Username:</h:outputLabel>
		        <h:inputText id="username" value="#{login.username}" required="true" requiredMessage="Unesite username!"/>
		        <h:message for="username"></h:message>
		        <h:outputLabel for="password">Password:</h:outputLabel>
		        <h:inputSecret id="password" value="#{login.password}" required="true" requiredMessage="Unesite password!"/>
		        <h:message for="password"></h:message>
		    </h:panelGrid>
		    <h:commandButton value="Login" action="#{login.login}" rendered="#{!login.loggedIn}"></h:commandButton>
	    </h:form>
	    <h:form>
			<h:panelGrid columns="2" rendered="#{!login.loggedIn}">
		        <h:outputLabel for="usernameRegister">Username:</h:outputLabel>
		        <h:inputText id="usernameRegister" value="#{login.username}"/>
		        <h:outputLabel for="passwordRegister">Password:</h:outputLabel>
		        <h:inputText id="passwordRegister" value="#{login.password}"/>
		        <h:outputLabel for="email">Email:</h:outputLabel>
		        <h:inputText id="email" value="#{login.email}"/>
		        <h:commandButton value="Register" action="#{login.register}"></h:commandButton>
		    </h:panelGrid>
		    
	    </h:form>
	</ui:define>
	
</ui:composition>
