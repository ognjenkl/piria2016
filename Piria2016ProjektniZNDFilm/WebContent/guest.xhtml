<ui:composition template="/WEB-INF/templates/masterTemplate.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
	
	
	<ui:define name="title">
		<h:outputText value="#{msg.pageTitleGuest}" rendered="#{login.user.privilege gt 3}" />
		<h:outputText value="#{msg.pageTitleUser}" rendered="#{login.user.privilege eq 3}" />
		<h:outputText value="#{msg.pageTitleSuperuser}" rendered="#{login.user.privilege eq 2}" />
		<h:outputText value="#{msg.pageTitleAdmin}" rendered="#{login.user.privilege eq 1}" />
	</ui:define>
	
	
	
	<ui:define name="content">
		<h:outputText  value="#{msg.welcome}"></h:outputText>
		#{login.user.username}
		<h:form id="searchForm">
			<h:outputLabel for="searchMovie" value="#{msg.search}:"></h:outputLabel>
			<h:inputText id="searchMovie" value="#{login.movie.keyWord}"></h:inputText>
			<h:commandButton value="#{msg.search}" action="#{login.movie.search}" ></h:commandButton>
			
			<h:dataTable border="1" var="m" value="#{login.movie.foundMoviesList}">
				<h:column>
					<f:facet name="header">
						Naziv
					</f:facet>
					#{m.title}
				</h:column>
				<h:column>
					<f:facet name="header">
						Datum objavljivanja
					</f:facet>
					<h:outputText value="#{m.releaseDate.time}">
						<f:convertDateTime type="date" dateStyle="long" />
					</h:outputText>					
				</h:column>
				<h:column rendered="#{login.user.privilege lt 4}">
					<h:commandLink value="#{msg.details}" action="#{login.movie.details2(m)}">
					</h:commandLink>
				</h:column>
			
			</h:dataTable>
		</h:form>
		<h:form id="loginForm">
			<h:panelGrid columns="3" rendered="#{!login.loggedIn}">
		        <h:outputLabel for="username" value="#{msg.username}:"></h:outputLabel>
		        <h:inputText id="username" value="#{login.username}" required="true" requiredMessage="Unesite username!"/>
		        <h:message for="username"></h:message>
		        <h:outputLabel for="password" value="#{msg.password}:"></h:outputLabel>
		        <h:inputSecret id="password" value="#{login.password}" required="true" requiredMessage="Unesite password!"/>
		        <h:message for="password"></h:message>
		    </h:panelGrid>
		    <h:commandButton id="loginButton" value="#{msg.login}" action="#{login.login}" rendered="#{!login.loggedIn}"></h:commandButton>
		    <h:message for="loginForm" style="color: red"></h:message>
	    </h:form>
	    <h:form id="registerForm">
			<h:panelGrid columns="3" rendered="#{!login.loggedIn}">
				<h:outputLabel for="firstName"  value="#{msg.firstName}:"></h:outputLabel>
		        <h:inputText id="firstName" value="#{login.userRegister.firstName}"/>
		        <h:message for="lastName"></h:message>
				<h:outputLabel for="lastName"  value="#{msg.lastName}:"></h:outputLabel>
		        <h:inputText id="lastName" value="#{login.userRegister.lastName}"/>
		        <h:message for="firstName"></h:message>
				<h:outputLabel for="socialNo"  value="#{msg.socialNo}:"></h:outputLabel>
		        <h:inputText id="socialNo" value="#{login.userRegister.socialNo}"/>
		        <h:message for="socialNo"></h:message>
				<h:outputLabel for="email"  value="#{msg.email}:"></h:outputLabel>
		        <h:inputText id="email" value="#{login.userRegister.email}"/>
		        <h:message for="email"></h:message>
				<h:outputLabel for="picture"  value="#{msg.picture}:"></h:outputLabel>
		        <h:inputText id="picture" value="#{login.userRegister.picture}"/>
		        <h:message for="picture"></h:message>
		        <h:outputLabel for="usernameRegister"  value="#{msg.username}:"></h:outputLabel>
		        <h:inputText id="usernameRegister" value="#{login.userRegister.username}"/>
		        <h:message for="usernameRegister"></h:message>
		        <h:outputLabel for="passwordRegister" value="#{msg.password}:"></h:outputLabel>
		        <h:inputSecret id="passwordRegister" value="#{login.userRegister.password}">
		        	<f:attribute name="confirmPasswordAttribute" value="#{confirmPasswordBind.submittedValue}" />
		        	<f:validator validatorId="passwordConfirmValidator" />
		        </h:inputSecret>
				<h:message for="passwordRegister"></h:message>
				<h:outputLabel for="passwordRegisterConfirm" value="#{msg.passwordConfirm}:" />
				<h:inputSecret id="passwordRegisterConfirm" binding="#{confirmPasswordBind}">
				</h:inputSecret>
				<h:message for="passwordRegisterConfirm" />
								
				<h:commandButton value="#{msg.register}" action="#{login.register}"></h:commandButton>
		    </h:panelGrid>
		    
	    </h:form>
	</ui:define>
	
</ui:composition>
