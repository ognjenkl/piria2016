<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
	




	<h:outputText  value="#{msg.welcome} #{login.user.firstName}"></h:outputText>
	<h:outputText value=""></h:outputText>

	<h:form id="searchForm">
		<h:outputLabel for="searchMovie" value="#{msg.search}:"></h:outputLabel>
		<h:inputText id="searchMovie" value="#{movie.keyWord}"></h:inputText>
		<h:commandButton value="#{msg.search}" action="#{movie.search}" ></h:commandButton>
		
		<h:dataTable border="1" var="m" value="#{movie.foundMoviesList}">
			<h:column>
				<f:facet name="header">
					<h:outputText value="#{msg.movieTitle}" />
				</f:facet>
				#{m.title}
			</h:column>
			<h:column>
				<f:facet name="header">
					<h:outputText value="#{msg.movieReleaseDate}" />
				</f:facet>
				<h:outputText value="#{m.releaseDate.time}">
					<f:convertDateTime type="date" dateStyle="long" pattern="dd.MM.yyyy." />
				</h:outputText>					
			</h:column>
			<h:column rendered="#{login.user.privilege lt 4}">
				<h:commandLink value="#{msg.details}" action="#{movie.details(login.user.id,m)}" />
			</h:column>
		
		</h:dataTable>
	</h:form>
	<h:form id="loginForm">
		<h:panelGrid columns="3" rendered="#{!login.loggedIn}">
	        <h:outputLabel for="username" value="#{msg.username}:"></h:outputLabel>
	        <h:inputText id="username" value="#{login.username}" required="true" requiredMessage="#{msg.usernameRequiredMessage}"/>
	        <h:message for="username" style="color: red"></h:message>
	        <h:outputLabel for="password" value="#{msg.password}:"></h:outputLabel>
	        <h:inputSecret id="password" value="#{login.password}" required="true" requiredMessage="#{msg.passwordRequiredMessage}"/>
	        <h:message for="password" style="color: red"></h:message>
	    </h:panelGrid>
	    <h:commandButton id="loginButton" value="#{msg.login}" action="#{login.login}" rendered="#{!login.loggedIn}"></h:commandButton>
		<div></div>
		<div></div>
		<h:message for="loginForm" style="color: red"></h:message>
    </h:form>
    <h:form id="registerForm" enctype="multipart/form-data">
		<h:panelGrid columns="3" rendered="#{!login.loggedIn}">
			<h:outputLabel for="firstName"  value="#{msg.firstName}:" />
	        <h:inputText id="firstName" value="#{login.userRegister.firstName}"/>
	        <h:message for="firstName"></h:message>
			
			<h:outputLabel for="lastName"  value="#{msg.lastName}:" />
	        <h:inputText id="lastName" value="#{login.userRegister.lastName}"/>
	        <h:message for="lastName"></h:message>
			
			<h:outputLabel for="socialNo"  value="#{msg.socialNo}:" />
	        <h:inputText id="socialNo" value="#{login.userRegister.socialNo}"/>
	        <h:message for="socialNo"></h:message>
			
			<h:outputLabel for="email"  value="#{msg.email}:" />
	        <h:inputText id="email" value="#{login.userRegister.email}"/>
	        <h:message for="email"></h:message>
			
			<h:outputLabel for="picture"  value="#{msg.picture}:" />
	        <h:inputFile id="picture" value="#{login.profilePicPart}" />
	        <h:message for="picture"></h:message>
	       
	        <h:outputLabel for="usernameRegister"  value="#{msg.username}:" />
	        <h:inputText id="usernameRegister" value="#{login.userRegister.username}"/>
	        <h:message for="usernameRegister"></h:message>
	        
	        <h:outputLabel for="passwordRegister" value="#{msg.password}:" />
	        <h:inputSecret id="passwordRegister" value="#{login.userRegister.password}" 
	        				required="true" requiredMessage="#{msg.passwordRequiredMessage}">
	        	<f:attribute name="confirmPasswordAttribute" value="#{confirmPasswordBind.submittedValue}" />
	        	<f:validator validatorId="passwordConfirmValidator" />
	        </h:inputSecret>
			<h:message for="passwordRegister" style="color: red"></h:message>
			
			<h:outputLabel for="passwordRegisterConfirm" value="#{msg.passwordConfirm}:" />
			<h:inputSecret id="passwordRegisterConfirm" binding="#{confirmPasswordBind}" 
							required="true" requiredMessage="#{msg.passwordRequiredMessage}">
			</h:inputSecret>
			<h:message for="passwordRegisterConfirm" style="color: red"/>
							
			<h:commandButton value="#{msg.register}" action="#{login.register}"></h:commandButton>
			<h:message for="registerForm"></h:message>
	    </h:panelGrid>
	</h:form>
	
	
</ui:composition>
